<div class="f-admin-container">
  <div class="f-admin-card">
    <div class="f-admin-header">
      <div class="f-admin-icon">üë§</div>
      <div class="f-admin-title-group">
        <h2><%= @candidate.new_record? ? "Nouveau Candidat" : "Modifier le profil" %></h2>
        <p>Remplissez les informations ci-dessous pour mettre √† jour la plateforme.</p>
      </div>
    </div>

    <%= form_with model: [:admin, @candidate], local: true, html: { multipart: true, class: 'f-admin-form' } do |f| %>

      <% if @candidate.errors.any? %>
        <div class="f-admin-errors">
          <div class="f-error-header">
            <strong>‚ö†Ô∏è <%= pluralize(@candidate.errors.count, "erreur") %> d√©tect√©e(s)</strong>
          </div>
          <ul>
            <% @candidate.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="f-admin-grid">
        <div class="f-admin-column">
          <div class="f-admin-field">
            <%= f.label :name, 'Nom complet' %>
            <%= f.text_field :name, class: 'f-admin-input', placeholder: 'Ex: Jean Dupont', required: true %>
          </div>

          <div class="f-admin-field">
            <%= f.label :video_url, 'URL de la vid√©o (YouTube/Vimeo)' %>
            <%= f.text_field :video_url, class: 'f-admin-input', placeholder: 'https://...' %>
          </div>

          <div class="f-admin-field f-admin-checkbox-group">
             <label class="f-admin-switch">
                <%= f.check_box :active %>
                <span class="f-admin-slider"></span>
             </label>
             <span class="f-admin-label-text">Rendre ce profil public (Actif)</span>
          </div>
        </div>

        <div class="f-admin-column">
          <div class="f-admin-field">
            <%= f.label :image, 'Photo de profil' %>
            
            <div class="f-admin-upload-zone">
              <% if @candidate.image.attached? %>
                <div class="f-admin-preview-container">
                  <%= image_tag url_for(@candidate.image), class: 'f-admin-img-preview' %>
                  <label class="f-admin-remove-box">
                    <%= f.check_box :remove_image, {}, "1", "0" %>
                    <span>Supprimer la photo</span>
                  </label>
                </div>
              <% else %>
                <div class="f-admin-empty-preview">
                  <span>Aucune image</span>
                </div>
              <% end %>
              
              <div class="f-admin-file-wrapper">
                <%= f.file_field :image, accept: 'image/*', class: 'f-admin-file-input' %>
                <span class="f-admin-file-custom">Choisir un fichier...</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="f-admin-field full-width">
        <%= f.label :bio, 'Biographie & Parcours' %>
        <%= f.text_area :bio, rows: 6, class: 'f-admin-input textarea', placeholder: 'D√©crivez le candidat...' %>
      </div>

      <div class="f-admin-actions">
        <%= link_to 'Annuler', admin_candidates_path, class: 'f-admin-btn-secondary' %>
        <%= f.submit 'Enregistrer le candidat', class: 'f-admin-btn-submit' %>
      </div>

    <% end %>
  </div>
</div>

<style>
  .f-admin-container { padding: 40px 20px; background: #f8fafc; min-height: 100vh; font-family: 'Inter', sans-serif; }
  .f-admin-card { max-width: 900px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; padding: 40px; }
  
  /* Header Form */
  .f-admin-header { display: flex; align-items: center; gap: 20px; margin-bottom: 35px; border-bottom: 1px solid #f1f5f9; padding-bottom: 25px; }
  .f-admin-icon { font-size: 2rem; background: #fffbeb; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border-radius: 15px; border: 1px solid #fef3c7; }
  .f-admin-title-group h2 { margin: 0; font-size: 1.5rem; font-weight: 800; color: #1e293b; }
  .f-admin-title-group p { margin: 5px 0 0 0; color: #64748b; font-size: 0.9rem; }

  /* Layout */
  .f-admin-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 20px; }
  .f-admin-field { margin-bottom: 20px; }
  .f-admin-field.full-width { margin-top: 10px; }
  .f-admin-field label { display: block; font-weight: 700; font-size: 0.85rem; color: #475569; text-transform: uppercase; letter-spacing: 0.025em; margin-bottom: 8px; }

  /* Inputs */
  .f-admin-input { 
    width: 100%; padding: 12px 16px; border-radius: 10px; border: 1px solid #e2e8f0; 
    font-size: 0.95rem; transition: all 0.2s; box-sizing: border-box; background: #fcfcfc;
  }
  .f-admin-input:focus { outline: none; border-color: #d97706; box-shadow: 0 0 0 4px rgba(217, 119, 6, 0.1); background: white; }
  .textarea { resize: vertical; min-height: 120px; }

  /* Checkbox / Switch */
  .f-admin-checkbox-group { display: flex; align-items: center; gap: 12px; background: #f8fafc; padding: 15px; border-radius: 12px; border: 1px solid #e2e8f0; }
  .f-admin-label-text { font-size: 0.9rem; font-weight: 600; color: #1e293b; }
  
  /* Upload Zone */
  .f-admin-upload-zone { background: #f8fafc; border: 2px dashed #e2e8f0; padding: 20px; border-radius: 15px; text-align: center; }
  .f-admin-img-preview { max-width: 100%; height: 150px; object-fit: cover; border-radius: 10px; margin-bottom: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
  .f-admin-empty-preview { height: 150px; background: #eef2f6; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #94a3b8; font-size: 0.85rem; margin-bottom: 10px; }
  .f-admin-remove-box { display: flex; align-items: center; justify-content: center; gap: 5px; color: #ef4444 !important; font-size: 0.75rem !important; cursor: pointer; }

  /* File Input Custom */
  .f-admin-file-wrapper { position: relative; overflow: hidden; display: inline-block; width: 100%; }
  .f-admin-file-custom { display: block; background: white; border: 1px solid #e2e8f0; padding: 8px; border-radius: 8px; font-size: 0.8rem; font-weight: 600; color: #64748b; }
  .f-admin-file-input { position: absolute; left: 0; top: 0; opacity: 0; cursor: pointer; width: 100%; height: 100%; }

  /* Errors */
  .f-admin-errors { background: #fff1f2; border-left: 4px solid #ef4444; padding: 20px; border-radius: 12px; margin-bottom: 30px; }
  .f-error-header { color: #991b1b; margin-bottom: 10px; }
  .f-admin-errors ul { margin: 0; padding-left: 20px; color: #b91c1c; font-size: 0.9rem; }

  /* Actions */
  .f-admin-actions { display: flex; justify-content: flex-end; gap: 15px; margin-top: 40px; padding-top: 25px; border-top: 1px solid #f1f5f9; }
  .f-admin-btn-submit { background: #d97706; color: white; padding: 14px 30px; border-radius: 10px; border: none; font-weight: 700; cursor: pointer; transition: all 0.2s; }
  .f-admin-btn-submit:hover { background: #b45309; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(217,119,6,0.2); }
  .f-admin-btn-secondary { background: #f1f5f9; color: #475569; padding: 14px 25px; border-radius: 10px; text-decoration: none; font-weight: 600; transition: all 0.2s; }
  .f-admin-btn-secondary:hover { background: #e2e8f0; color: #1e293b; }

  @media (max-width: 768px) { .f-admin-grid { grid-template-columns: 1fr; } }
</style>