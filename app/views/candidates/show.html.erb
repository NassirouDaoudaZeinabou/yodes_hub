<%# Candidate show page %>
<style>
  :root {
    --gold-primary: #D4AF37;
    --gold-dark: #B8860B;
    --gold-light: #F4E4C1;
    --navy: #0f172a;
    --slate-50: #f8fafc;
    --slate-100: #f1f5f9;
    --slate-200: #e2e8f0;
    --slate-300: #cbd5e1;
    --slate-400: #94a3b8;
    --slate-500: #64748b;
    --slate-600: #475569;
    --slate-700: #334155;
    --radius-sm: 12px;
    --radius-md: 16px;
    --radius-lg: 20px;
    --radius-xl: 24px;
    --shadow-sm: 0 2px 8px rgba(15, 23, 42, 0.04);
    --shadow-md: 0 8px 32px rgba(15, 23, 42, 0.06);
    --shadow-lg: 0 24px 80px rgba(15, 23, 42, 0.08);
    --shadow-xl: 0 32px 100px rgba(15, 23, 42, 0.12);
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  * {
    box-sizing: border-box;
  }

  .candidate-show {
    max-width: 1320px;
    margin: 0 auto;
    padding: 64px 24px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
    background: linear-gradient(180deg, var(--slate-50) 0%, #ffffff 100%);
    min-height: 100vh;
  }

  /* ========== BREADCRUMB ========== */
  .breadcrumb {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 32px;
    font-size: 14px;
    color: var(--slate-500);
    animation: fadeIn 0.5s ease-out;
  }

  .breadcrumb a {
    color: var(--slate-600);
    text-decoration: none;
    transition: color 0.2s;
  }

  .breadcrumb a:hover {
    color: var(--gold-primary);
  }

  .breadcrumb svg {
    width: 14px;
    height: 14px;
    opacity: 0.5;
  }

  .breadcrumb .current {
    color: var(--navy);
    font-weight: 500;
  }

  /* ========== HEADER ========== */
  .candidate-header {
    text-align: center;
    margin-bottom: 64px;
    animation: fadeInDown 0.7s ease-out;
  }

  .candidate-header .label {
    display: inline-block;
    padding: 6px 16px;
    background: linear-gradient(135deg, var(--gold-light), var(--gold-primary));
    color: var(--navy);
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    border-radius: 50px;
    margin-bottom: 20px;
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.2);
  }

  .candidate-header h1 {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 56px;
    font-weight: 700;
    color: var(--navy);
    margin: 0 0 20px;
    line-height: 1.1;
    letter-spacing: -1px;
    background: linear-gradient(135deg, var(--navy) 0%, var(--slate-700) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .candidate-header .subtitle {
    font-size: 18px;
    color: var(--slate-500);
    font-weight: 400;
    line-height: 1.6;
    max-width: 600px;
    margin: 0 auto 24px;
  }

  .meta-badges {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    flex-wrap: wrap;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: white;
    border: 2px solid var(--slate-200);
    border-radius: 50px;
    color: var(--slate-600);
    font-size: 14px;
    font-weight: 500;
    transition: var(--transition);
  }

  .badge:hover {
    border-color: var(--gold-primary);
    transform: translateY(-2px);
  }

  .badge svg {
    width: 16px;
    height: 16px;
    opacity: 0.7;
  }

  .badge-primary {
    background: linear-gradient(135deg, var(--gold-primary), var(--gold-dark));
    border-color: var(--gold-primary);
    color: var(--navy);
    font-weight: 600;
  }

  /* ========== LAYOUT GRID ========== */
  .candidate-content {
    display: grid;
    grid-template-columns: 480px 1fr;
    gap: 64px;
    align-items: start;
  }

  /* ========== SIDEBAR ========== */
  .candidate-sidebar {
    position: sticky;
    top: 40px;
  }

  .media-card {
    background: white;
    border-radius: var(--radius-xl);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    margin-bottom: 32px;
    transition: var(--transition);
    border: 1px solid rgba(0, 0, 0, 0.04);
  }

  .media-card:hover {
    transform: translateY(-6px);
    box-shadow: var(--shadow-xl);
  }

  .candidate-photo {
    position: relative;
    background: linear-gradient(135deg, var(--slate-100) 0%, var(--slate-200) 100%);
    aspect-ratio: 3/4;
    overflow: hidden;
  }

  .candidate-photo::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(180deg, transparent 0%, rgba(15, 23, 42, 0.6) 100%);
    opacity: 0;
    transition: opacity 0.4s ease;
    z-index: 1;
  }

  .media-card:hover .candidate-photo::before {
    opacity: 1;
  }

  .candidate-photo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    display: block;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .media-card:hover .candidate-photo img {
    transform: scale(1.08);
  }

  .photo-badge {
    position: absolute;
    top: 20px;
    right: 20px;
    padding: 8px 16px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 50px;
    font-size: 13px;
    font-weight: 600;
    color: var(--navy);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    z-index: 2;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .photo-badge svg {
    width: 14px;
    height: 14px;
  }

  .photo-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 28px;
    background: linear-gradient(to top, rgba(15, 23, 42, 0.95) 0%, transparent 100%);
    color: white;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.4s ease;
    z-index: 2;
  }

  .media-card:hover .photo-overlay {
    opacity: 1;
    transform: translateY(0);
  }

  .photo-overlay strong {
    display: block;
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 6px;
  }

  .photo-overlay span {
    font-size: 14px;
    opacity: 0.9;
  }

  /* Stats Card */
  .stats-card {
    background: white;
    border-radius: var(--radius-lg);
    padding: 24px;
    box-shadow: var(--shadow-md);
    margin-bottom: 32px;
    border: 1px solid var(--slate-200);
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
  }

  .stat-item {
    text-align: center;
  }

  .stat-value {
    display: block;
    font-size: 28px;
    font-weight: 700;
    color: var(--navy);
    margin-bottom: 4px;
    font-family: 'Playfair Display', Georgia, serif;
  }

  .stat-label {
    font-size: 13px;
    color: var(--slate-500);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* Video Section */
  .video-container {
    background: white;
    border-radius: var(--radius-xl);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    border: 1px solid rgba(0, 0, 0, 0.04);
    transition: var(--transition);
  }

  .video-container:hover {
    box-shadow: var(--shadow-xl);
  }

  .video-header {
    padding: 20px 24px;
    background: linear-gradient(135deg, var(--slate-50) 0%, white 100%);
    border-bottom: 1px solid var(--slate-200);
  }

  .video-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: var(--navy);
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .video-header svg {
    width: 18px;
    height: 18px;
    color: var(--gold-primary);
  }

  .video-embed {
    position: relative;
    padding-bottom: 56.25%;
    height: 0;
    overflow: hidden;
    background: #000;
  }

  .video-embed iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
  }

  .video-link-card {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 24px;
    background: white;
    border: 2px solid var(--slate-200);
    border-radius: var(--radius-lg);
    text-decoration: none;
    color: var(--navy);
    transition: var(--transition);
    position: relative;
    overflow: hidden;
  }

  .video-link-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
    transition: left 0.5s;
  }

  .video-link-card:hover::before {
    left: 100%;
  }

  .video-link-card:hover {
    border-color: var(--gold-primary);
    background: linear-gradient(135deg, var(--slate-50) 0%, white 100%);
    transform: translateX(6px);
    box-shadow: var(--shadow-md);
  }

  .video-link-icon {
    flex-shrink: 0;
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--gold-primary) 0%, var(--gold-dark) 100%);
    border-radius: var(--radius-md);
    color: var(--navy);
    box-shadow: 0 4px 16px rgba(212, 175, 55, 0.3);
    transition: var(--transition);
  }

  .video-link-card:hover .video-link-icon {
    transform: scale(1.1) rotate(5deg);
  }

  .video-link-text {
    flex: 1;
  }

  .video-link-text strong {
    display: block;
    font-weight: 700;
    font-size: 16px;
    margin-bottom: 6px;
    color: var(--navy);
  }

  .video-link-text small {
    color: var(--slate-500);
    font-size: 13px;
  }

  .video-link-arrow {
    flex-shrink: 0;
    color: var(--slate-400);
    transition: var(--transition);
  }

  .video-link-card:hover .video-link-arrow {
    color: var(--gold-primary);
    transform: translateX(4px);
  }

  /* ========== MAIN CONTENT ========== */
  .candidate-main {
    background: white;
    border-radius: var(--radius-xl);
    padding: 56px;
    box-shadow: var(--shadow-md);
    animation: fadeInUp 0.7s ease-out;
    border: 1px solid rgba(0, 0, 0, 0.04);
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 36px;
    padding-bottom: 24px;
    border-bottom: 3px solid var(--slate-100);
    position: relative;
  }

  .section-header::after {
    content: '';
    position: absolute;
    bottom: -3px;
    left: 0;
    width: 120px;
    height: 3px;
    background: linear-gradient(90deg, var(--gold-primary), transparent);
  }

  .section-icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--gold-primary) 0%, var(--gold-dark) 100%);
    border-radius: var(--radius-sm);
    color: var(--navy);
    box-shadow: 0 4px 16px rgba(212, 175, 55, 0.3);
  }

  .section-title {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 32px;
    font-weight: 700;
    color: var(--navy);
    margin: 0;
  }

  .candidate-bio {
    color: var(--slate-600);
    font-size: 17px;
    line-height: 1.9;
    white-space: pre-wrap;
    margin-bottom: 48px;
  }

  .candidate-bio p {
    margin: 0 0 20px;
  }

  .candidate-bio p:last-child {
    margin-bottom: 0;
  }

  /* Quote styling for bio */
  .candidate-bio blockquote {
    border-left: 4px solid var(--gold-primary);
    padding-left: 24px;
    margin: 28px 0;
    font-style: italic;
    color: var(--slate-500);
  }

  /* Info Cards */
  .info-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 48px;
  }

  .info-card {
    padding: 24px;
    background: linear-gradient(135deg, var(--slate-50) 0%, white 100%);
    border: 2px solid var(--slate-100);
    border-radius: var(--radius-md);
    transition: var(--transition);
  }

  .info-card:hover {
    border-color: var(--gold-primary);
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
  }

  .info-card-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    border-radius: 8px;
    margin-bottom: 12px;
    color: var(--gold-primary);
  }

  .info-card-title {
    font-size: 13px;
    color: var(--slate-500);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 6px;
  }

  .info-card-value {
    font-size: 18px;
    font-weight: 700;
    color: var(--navy);
  }

  .empty-state {
    text-align: center;
    padding: 64px 32px;
    background: linear-gradient(135deg, var(--slate-50) 0%, white 100%);
    border-radius: var(--radius-lg);
    border: 2px dashed var(--slate-300);
  }

  .empty-state svg {
    width: 72px;
    height: 72px;
    margin-bottom: 20px;
    opacity: 0.2;
    color: var(--slate-400);
  }

  .empty-state p {
    font-size: 16px;
    color: var(--slate-500);
    margin: 0;
  }

  /* ========== ACTIONS ========== */
  .candidate-actions {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 20px;
    padding-top: 40px;
    border-top: 3px solid var(--slate-100);
  }

  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 18px 36px;
    border-radius: var(--radius-md);
    border: 0;
    cursor: pointer;
    text-decoration: none;
    font-weight: 700;
    font-size: 16px;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
    white-space: nowrap;
  }

  .btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }

  .btn:active::before {
    width: 400px;
    height: 400px;
  }

  .btn svg {
    position: relative;
    z-index: 1;
    width: 20px;
    height: 20px;
    transition: transform 0.3s;
  }

  .btn span {
    position: relative;
    z-index: 1;
  }

  .btn-secondary {
    background: white;
    border: 2px solid var(--slate-200);
    color: var(--slate-700);
  }

  .btn-secondary:hover {
    border-color: var(--slate-300);
    background: var(--slate-50);
    transform: translateX(-6px);
  }

  .btn-secondary:hover svg {
    transform: translateX(-4px);
  }

  .btn-primary {
    background: linear-gradient(135deg, var(--gold-primary) 0%, var(--gold-dark) 100%);
    color: var(--navy);
    font-weight: 800;
    box-shadow: 0 8px 24px rgba(212, 175, 55, 0.35);
    border: 2px solid var(--gold-primary);
  }

  .btn-primary:hover {
    transform: translateY(-4px);
    box-shadow: 0 16px 40px rgba(212, 175, 55, 0.45);
  }

  .btn-primary:hover svg {
    transform: scale(1.2);
  }

  .btn-primary:active {
    transform: translateY(-2px);
  }

  /* Share Button */
  .share-button {
    position: fixed;
    bottom: 32px;
    right: 32px;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, var(--gold-primary), var(--gold-dark));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--navy);
    box-shadow: 0 8px 24px rgba(212, 175, 55, 0.4);
    cursor: pointer;
    transition: var(--transition);
    z-index: 100;
    border: none;
  }

  .share-button:hover {
    transform: scale(1.1) rotate(10deg);
    box-shadow: 0 12px 32px rgba(212, 175, 55, 0.5);
  }

  .share-button svg {
    width: 24px;
    height: 24px;
  }

  /* ========== ANIMATIONS ========== */
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
  }

  /* ========== RESPONSIVE ========== */
  @media (max-width: 1200px) {
    .candidate-content {
      grid-template-columns: 440px 1fr;
      gap: 48px;
    }

    .candidate-header h1 {
      font-size: 48px;
    }
  }

  @media (max-width: 1024px) {
    .candidate-content {
      grid-template-columns: 400px 1fr;
      gap: 40px;
    }

    .candidate-header h1 {
      font-size: 42px;
    }

    .candidate-main {
      padding: 40px;
    }
  }

  @media (max-width: 968px) {
    .candidate-show {
      padding: 48px 20px;
    }

    .candidate-content {
      grid-template-columns: 1fr;
      gap: 48px;
    }

    .candidate-sidebar {
      position: static;
      max-width: 600px;
      margin: 0 auto;
    }

    .candidate-header h1 {
      font-size: 38px;
    }

    .stats-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  @media (max-width: 640px) {
    .candidate-show {
      padding: 32px 16px;
    }

    .candidate-header {
      margin-bottom: 48px;
    }

    .candidate-header h1 {
      font-size: 32px;
    }

    .candidate-header .subtitle {
      font-size: 16px;
    }

    .candidate-main {
      padding: 32px 24px;
    }

    .section-title {
      font-size: 26px;
    }

    .candidate-actions {
      grid-template-columns: 1fr;
    }

    .btn {
      width: 100%;
      padding: 16px 28px;
    }

    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .share-button {
      bottom: 20px;
      right: 20px;
      width: 52px;
      height: 52px;
    }

    .info-cards {
      grid-template-columns: 1fr;
    }
  }

  /* Print Styles */
  @media print {
    .candidate-actions,
    .share-button,
    .breadcrumb {
      display: none;
    }

    .candidate-sidebar {
      position: static;
    }

    .candidate-show {
      padding: 0;
    }
  }
</style>

<div class="candidate-show">
  
  <!-- ========== BREADCRUMB ========== -->
  <nav class="breadcrumb">
    <%= link_to candidates_path do %>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9 22 9 12 15 12 15 22"></polyline>
      </svg>
      Candidats
    <% end %>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
    <span class="current"><%= truncate(@candidate.name, length: 40) %></span>
  </nav>

  <!-- ========== HEADER ========== -->
  <header class="candidate-header">
    <div class="label">Candidat officiel</div>
    <h1><%= @candidate.name %></h1>
    <p class="subtitle">
      Découvrez le profil complet, la vision et les engagements de ce candidat
    </p>
    <div class="meta-badges">
      <span class="badge">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        <%= l(@candidate.created_at.to_date, format: :long) rescue @candidate.created_at.strftime('%d %B %Y') %>
      </span>
      <% if @candidate.respond_to?(:votes_count) %>
        <span class="badge badge-primary">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
          </svg>
          <%= pluralize(@candidate.votes_count, 'vote') %>
        </span>
      <% end %>
    </div>
  </header>

  <!-- ========== MAIN CONTENT GRID ========== -->
  <div class="candidate-content">
    
    <!-- ========== SIDEBAR ========== -->
    <aside class="candidate-sidebar">
      
      <!-- Photo Card -->
      <div class="media-card">
        <div class="candidate-photo">
          <div class="photo-badge">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
            </svg>
            Candidat
          </div>
          <% if @candidate.image.attached? %>
            <%= image_tag(@candidate.image, alt: @candidate.name) %>
          <% else %>
            <%= image_tag('sarki.webp', alt: @candidate.name) %>
          <% end %>
          <div class="photo-overlay">
            <strong><%= @candidate.name %></strong>
            <span>Candidat officiel</span>
          </div>
        </div>
      </div>

      <!-- Stats Card -->
      <% if @candidate.respond_to?(:votes_count) || @candidate.respond_to?(:views_count) %>
        <div class="stats-card">
          <div class="stats-grid">
            <% if @candidate.respond_to?(:votes_count) %>
              <div class="stat-item">
                <span class="stat-value"><%= @candidate.votes_count || 0 %></span>
                <span class="stat-label">Votes</span>
              </div>
            <% end %>
            <% if @candidate.respond_to?(:views_count) %>
              <div class="stat-item">
                <span class="stat-value"><%= @candidate.views_count || 0 %></span>
                <span class="stat-label">Vues</span>
              </div>
            <% end %>
            <div class="stat-item">
              <span class="stat-value">
                <%= time_ago_in_words(@candidate.created_at) %>
              </span>
              <span class="stat-label">Publié</span>
            </div>
            <div class="stat-item">
              <span class="stat-value">100%</span>
              <span class="stat-label">Actif</span>
            </div>
          </div>
        </div>
      <% end %>

      <!-- Video Section -->
      <% if @candidate.video_url.present? %>
        <% 
          embed_id = nil
          if @candidate.video_url =~ /youtu\.be\/([^\?&\s]+)/
            embed_id = $1
          elsif @candidate.video_url =~ /[\?&]v=([^&\s]+)/
            embed_id = $1
          elsif @candidate.video_url =~ /embed\/([^\?&\s]+)/
            embed_id = $1
          end
        %>
        
        <% if embed_id.present? %>
          <div class="video-container">
            <div class="video-header">
              <h3>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polygon points="23 7 16 12 23 17 23 7"></polygon>
                  <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                </svg>
                Vidéo de présentation
              </h3>
            </div>
            <div class="video-embed">
              <iframe 
                src="https://www.youtube.com/embed/<%= embed_id %>?rel=0&modestbranding=1" 
                allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen 
                title="Vidéo de <%= @candidate.name %>"
                loading="lazy">
              </iframe>
            </div>
          </div>
        <% else %>
          <%= link_to @candidate.video_url, target: '_blank', rel: 'noopener noreferrer', class: 'video-link-card' do %>
            <div class="video-link-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
              </svg>
            </div>
            <div class="video-link-text">
              <strong>Voir la vidéo de présentation</strong>
              <small>S'ouvre dans un nouvel onglet</small>
            </div>
            <svg class="video-link-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
              <polyline points="15 3 21 3 21 9"></polyline>
              <line x1="10" y1="14" x2="21" y2="3"></line>
            </svg>
          <% end %>
        <% end %>
      <% end %>

    </aside>

    <!-- ========== MAIN CONTENT ========== -->
    <main class="candidate-main">
      
      <div class="section-header">
        <div class="section-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </div>
        <h2 class="section-title">Biographie et Vision</h2>
      </div>

      <!-- Info Cards (Optional additional info) -->
      <% if @candidate.respond_to?(:party) || @candidate.respond_to?(:profession) %>
        <div class="info-cards">
          <% if @candidate.respond_to?(:party) && @candidate.party.present? %>
            <div class="info-card">
              <div class="info-card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                  <path d="M2 17l10 5 10-5"></path>
                  <path d="M2 12l10 5 10-5"></path>
                </svg>
              </div>
              <div class="info-card-title">Parti</div>
              <div class="info-card-value"><%= @candidate.party %></div>
            </div>
          <% end %>
          <% if @candidate.respond_to?(:profession) && @candidate.profession.present? %>
            <div class="info-card">
              <div class="info-card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                  <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                </svg>
              </div>
              <div class="info-card-title">Profession</div>
              <div class="info-card-value"><%= @candidate.profession %></div>
            </div>
          <% end %>
        </div>
      <% end %>
      
      <% bio_content = @candidate.try(:bio) || @candidate.try(:description) %>
      <% if bio_content.present? %>
        <div class="candidate-bio">
          <%= simple_format(bio_content) %>
        </div>
      <% else %>
        <div class="empty-state">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
            <polyline points="10 9 9 9 8 9"></polyline>
          </svg>
          <p>Aucune biographie n'a été fournie pour ce candidat.</p>
        </div>
      <% end %>

      <div class="candidate-actions">
        <%= link_to candidates_path, class: 'btn btn-secondary' do %>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
          <span>Retour aux candidats</span>
        <% end %>

        <%= button_to vote_candidate_path(@candidate), 
            method: :post, 
            form: { data: { turbo: false } }, 
            class: 'btn btn-primary' do %>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
          </svg>
          <span>Voter pour ce candidat</span>
        <% end %>
      </div>

    </main>

  </div>

  <!-- ========== SHARE BUTTON ========== -->
  <button class="share-button" onclick="navigator.share ? navigator.share({title: '<%= @candidate.name %>', url: window.location.href}) : alert('Partagez cette page en copiant l\'URL')">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="18" cy="5" r="3"></circle>
      <circle cx="6" cy="12" r="3"></circle>
      <circle cx="18" cy="19" r="3"></circle>
      <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
      <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
    </svg>
  </button>

</div>