<div class="login-wrapper">
  <div class="login-container">
    <div class="login-card">
      <div class="card-glow"></div>
      
      <div class="card-header">
        <div class="icon-badge">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
          </svg>
        </div>
        <h2>Connexion</h2>
        <p>Bienvenue sur votre espace</p>
      </div>

      <%= form_for(resource, as: resource_name, url: session_path(resource_name), html: { class: 'login-form' }) do |f| %>
        
        <div class="form-section">
          <div class="field">
            <%= f.label :email, class: 'form-label' %>
            <div class="input-wrapper">
              <%= f.email_field :email, 
                  autofocus: true, 
                  autocomplete: "email",
                  class: 'form-input',
                  placeholder: 'nom@exemple.com' %>
              <span class="input-icon">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M22 6L12 13L2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </div>
          </div>

          <div class="field">
            <%= f.label :password, "Mot de passe", class: 'form-label' %>
            <div class="input-wrapper">
              <%= f.password_field :password, 
                  autocomplete: "current-password",
                  class: 'form-input',
                  id: 'password-field',
                  placeholder: '••••••••' %>
              <span class="input-icon">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
              <button type="button" class="toggle-password" id="togglePassword">
                <svg class="eye-open" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <svg class="eye-closed" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                  <path d="M17.94 17.94C16.2306 19.243 14.1491 19.9649 12 20C5 20 1 12 1 12C2.24389 9.68192 3.96914 7.65663 6.06 6.06M9.9 4.24C10.5883 4.0789 11.2931 3.99836 12 4C19 4 23 12 23 12C22.393 13.1356 21.6691 14.2048 20.84 15.19M14.12 14.12C13.8454 14.4148 13.5141 14.6512 13.1462 14.8151C12.7782 14.9791 12.3809 15.0673 11.9781 15.0744C11.5753 15.0815 11.1752 15.0074 10.8016 14.8565C10.4281 14.7056 10.0887 14.4811 9.80385 14.1962C9.51897 13.9113 9.29439 13.572 9.14351 13.1984C8.99262 12.8248 8.91853 12.4247 8.92563 12.0219C8.93274 11.6191 9.02091 11.2219 9.18488 10.8539C9.34884 10.4859 9.58525 10.1547 9.88 9.88" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <line x1="1" y1="1" x2="23" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>
          </div>

          <div class="form-options">
            <% if devise_mapping.rememberable? %>
              <div class="field checkbox-field">
                <%= f.check_box :remember_me, class: 'custom-checkbox', id: 'remember_me' %>
                <%= f.label :remember_me, "Se souvenir de moi", class: 'checkbox-label' %>
              </div>
            <% end %>
            
            <% if devise_mapping.recoverable? %>
              <%= link_to "Mot de passe oublié?", new_password_path(resource_name), class: 'forgot-link' %>
            <% end %>
          </div>

          <div class="actions">
            <%= f.submit "Se connecter", class: 'submit-button' %>
          </div>
        </div>
      <% end %>

      <div class="card-footer">
        <%= render "devise/shared/links" %>
      </div>
    </div>

    <div class="security-note">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span>Connexion sécurisée SSL/TLS 256-bit</span>
    </div>
  </div>
</div>

<style>
  /* === Variables === */
  :root {
    --yellow-dark: #C89F00;
    --yellow-gold: #E6B800;
    --yellow-bright: #FFD700;
    --yellow-light: #FFEB99;
    --yellow-pale: #FFF9E6;
    --dark-bg: #1C1810;
    --dark-card: #252018;
    --text-primary: #2A2520;
    --text-secondary: #6B5F4D;
    --border-color: #E6B800;
    --shadow-yellow: rgba(230, 184, 0, 0.25);
  }

  /* === Reset & Base === */
  .login-wrapper * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  /* === Main Container === */
  .login-wrapper {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    background: linear-gradient(135deg, var(--dark-bg) 0%, #2d2416 50%, var(--dark-card) 100%);
    position: relative;
    overflow: hidden;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  }

  .login-wrapper::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
      radial-gradient(circle at 20% 30%, rgba(230, 184, 0, 0.06) 0%, transparent 50%),
      radial-gradient(circle at 80% 70%, rgba(255, 215, 0, 0.04) 0%, transparent 50%);
    pointer-events: none;
  }

  .login-wrapper::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(230, 184, 0, 0.02) 2px,
      rgba(230, 184, 0, 0.02) 4px
    );
    animation: gridMove 20s linear infinite;
    pointer-events: none;
  }

  @keyframes gridMove {
    0% { transform: translateY(0); }
    100% { transform: translateY(50px); }
  }

  /* === Card Container === */
  .login-container {
    position: relative;
    z-index: 1;
    max-width: 480px;
    width: 100%;
    animation: slideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(30px) scale(0.96);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  /* === Login Card === */
  .login-card {
    background: linear-gradient(160deg, #FFFEF8 0%, #FFF9E6 100%);
    border-radius: 16px;
    position: relative;
    overflow: hidden;
    box-shadow: 
      0 25px 50px -12px rgba(0, 0, 0, 0.4),
      0 0 0 1px rgba(230, 184, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.5);
  }

  .card-glow {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, 
      var(--yellow-dark) 0%, 
      var(--yellow-bright) 50%, 
      var(--yellow-dark) 100%);
    background-size: 200% 100%;
    animation: shimmer 3s ease-in-out infinite;
  }

  @keyframes shimmer {
    0%, 100% { background-position: 0% 0%; }
    50% { background-position: 100% 0%; }
  }

  /* === Card Header === */
  .card-header {
    text-align: center;
    padding: 3rem 2rem 2.5rem;
    background: linear-gradient(180deg, rgba(230, 184, 0, 0.08) 0%, transparent 100%);
    border-bottom: 1px solid rgba(230, 184, 0, 0.15);
  }

  .icon-badge {
    width: 72px;
    height: 72px;
    margin: 0 auto 1.5rem;
    background: linear-gradient(135deg, var(--yellow-dark) 0%, var(--yellow-gold) 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 
      0 8px 24px var(--shadow-yellow),
      inset 0 2px 8px rgba(255, 255, 255, 0.2);
    animation: levitate 3s ease-in-out infinite;
    position: relative;
  }

  .icon-badge::before {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--yellow-bright), var(--yellow-dark));
    opacity: 0;
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes levitate {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
  }

  @keyframes pulse {
    0%, 100% { opacity: 0; transform: scale(1); }
    50% { opacity: 0.3; transform: scale(1.1); }
  }

  .icon-badge svg {
    width: 32px;
    height: 32px;
    color: #FFFEF8;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
    position: relative;
    z-index: 1;
  }

  .card-header h2 {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    letter-spacing: -0.02em;
  }

  .card-header p {
    font-size: 0.95rem;
    color: var(--text-secondary);
    font-weight: 400;
  }

  /* === Form Section === */
  .form-section {
    padding: 2rem 2rem 2.5rem;
  }

  .field {
    margin-bottom: 1.5rem;
    position: relative;
  }

  .form-label {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    letter-spacing: 0.01em;
  }

  /* === Input Wrapper === */
  .input-wrapper {
    position: relative;
  }

  .form-input {
    width: 100%;
    padding: 0.875rem 1rem 0.875rem 3rem;
    font-size: 1rem;
    color: var(--text-primary);
    background: #FFFFFF;
    border: 2px solid #E8E4DC;
    border-radius: 10px;
    outline: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-family: inherit;
  }

  .form-input::placeholder {
    color: #B8B3A8;
  }

  .form-input:focus {
    border-color: var(--yellow-gold);
    background: #FFFFFF;
    box-shadow: 
      0 0 0 4px rgba(230, 184, 0, 0.12),
      0 4px 12px rgba(230, 184, 0, 0.15);
    transform: translateY(-1px);
  }

  .input-icon {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-secondary);
    pointer-events: none;
    transition: color 0.3s ease;
  }

  .input-icon svg {
    width: 20px;
    height: 20px;
  }

  .form-input:focus ~ .input-icon {
    color: var(--yellow-gold);
  }

  /* === Toggle Password === */
  .toggle-password {
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.3s ease;
    border-radius: 6px;
  }

  .toggle-password:hover {
    color: var(--yellow-gold);
    background: rgba(230, 184, 0, 0.08);
  }

  .toggle-password svg {
    width: 20px;
    height: 20px;
  }

  /* === Form Options === */
  .form-options {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    font-size: 0.875rem;
    gap: 1rem;
  }

  .checkbox-field {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin: 0;
  }

  .custom-checkbox {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--yellow-gold);
    border-radius: 4px;
  }

  .checkbox-label {
    color: var(--text-secondary);
    cursor: pointer;
    user-select: none;
    font-weight: 500;
  }

  .forgot-link {
    color: var(--yellow-dark);
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
    position: relative;
  }

  .forgot-link::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--yellow-gold);
    transition: width 0.3s ease;
  }

  .forgot-link:hover {
    color: var(--yellow-gold);
  }

  .forgot-link:hover::after {
    width: 100%;
  }

  /* === Submit Button === */
  .actions {
    margin: 0;
  }

  .submit-button {
    width: 100%;
    padding: 1rem;
    font-size: 1rem;
    font-weight: 600;
    color: #FFFFFF;
    background: linear-gradient(135deg, var(--yellow-dark) 0%, var(--yellow-gold) 100%);
    border: none;
    border-radius: 10px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    box-shadow: 0 8px 16px var(--shadow-yellow);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-family: inherit;
    letter-spacing: 0.02em;
  }

  .submit-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s ease;
  }

  .submit-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 24px var(--shadow-yellow);
  }

  .submit-button:hover::before {
    left: 100%;
  }

  .submit-button:active {
    transform: translateY(0);
  }

  /* === Card Footer === */
  .card-footer {
    text-align: center;
    padding: 1.5rem 2rem 2rem;
    background: linear-gradient(0deg, rgba(230, 184, 0, 0.04) 0%, transparent 100%);
    border-top: 1px solid rgba(230, 184, 0, 0.1);
    font-size: 0.875rem;
  }

  .card-footer a {
    color: var(--yellow-dark);
    text-decoration: none;
    font-weight: 600;
    transition: color 0.3s ease;
    margin: 0 0.5rem;
  }

  .card-footer a:hover {
    color: var(--yellow-gold);
  }

  /* === Security Note === */
  .security-note {
    margin-top: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.5);
    font-weight: 500;
  }

  .security-note svg {
    width: 16px;
    height: 16px;
  }

  /* === Responsive === */
  @media (max-width: 640px) {
    .login-wrapper {
      padding: 1rem;
    }

    .card-header {
      padding: 2.5rem 1.5rem 2rem;
    }

    .card-header h2 {
      font-size: 1.75rem;
    }

    .form-section {
      padding: 1.5rem;
    }

    .icon-badge {
      width: 64px;
      height: 64px;
    }

    .icon-badge svg {
      width: 28px;
      height: 28px;
    }

    .form-options {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.75rem;
    }
  }

  /* === Animations for page load === */
  .field {
    animation: fadeInUp 0.5s ease-out backwards;
  }

  .field:nth-child(1) { animation-delay: 0.1s; }
  .field:nth-child(2) { animation-delay: 0.2s; }
  .form-options { animation: fadeInUp 0.5s ease-out 0.3s backwards; }
  .actions { animation: fadeInUp 0.5s ease-out 0.4s backwards; }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Password toggle functionality
    const toggleBtn = document.getElementById('togglePassword');
    const passwordField = document.getElementById('password-field');
    const eyeOpen = toggleBtn?.querySelector('.eye-open');
    const eyeClosed = toggleBtn?.querySelector('.eye-closed');

    if (toggleBtn && passwordField) {
      toggleBtn.addEventListener('click', function() {
        const isPassword = passwordField.type === 'password';
        passwordField.type = isPassword ? 'text' : 'password';
        
        if (eyeOpen && eyeClosed) {
          eyeOpen.style.display = isPassword ? 'none' : 'block';
          eyeClosed.style.display = isPassword ? 'block' : 'none';
        }
      });
    }

    // Form submission state
    const form = document.querySelector('.login-form');
    if (form) {
      form.addEventListener('submit', function() {
        const submitBtn = form.querySelector('.submit-button');
        if (submitBtn) {
          submitBtn.style.opacity = '0.7';
          submitBtn.disabled = true;
          submitBtn.textContent = 'Connexion en cours...';
        }
      });
    }
  });
</script>
